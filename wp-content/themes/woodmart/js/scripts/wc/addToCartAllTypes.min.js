!function(a){woodmartThemeModule.addToCartAllTypes=function(){0!=woodmart_settings.ajax_add_to_cart&&woodmartThemeModule.$body.on("submit","form.cart",function(b){var c=a(this),d=c.parents(".single-product-page");if(0===d.length&&(d=c.parents(".product-quick-view")),!(d.hasClass("product-type-external")||d.hasClass("product-type-zakeke")||d.hasClass("product-type-gift-card"))){b.preventDefault();var e=c.find(".single_add_to_cart_button"),f=c.serialize();f+="&action=woodmart_ajax_add_to_cart",e.val()&&(f+="&add-to-cart="+e.val()),e.removeClass("added not-added"),e.addClass("loading"),woodmartThemeModule.$body.trigger("adding_to_cart",[e,f]),a.ajax({url:woodmart_settings.ajaxurl,data:f,method:"POST",success:function(b){if(b){if(window.location.toString().replace("add-to-cart","added-to-cart"),b.error&&b.product_url)return void(window.location=b.product_url);if("yes"===woodmart_settings.cart_redirect_after_add)window.location=woodmart_settings.cart_url;else{e.removeClass("loading");var c=b.fragments,d=b.cart_hash;c&&a.each(c,function(b){a(b).addClass("updating")}),c&&a.each(c,function(b,c){a(b).replaceWith(c)}),b.notices.indexOf("error")>0?(woodmartThemeModule.$body.append(b.notices),e.addClass("not-added")):("widget"===woodmart_settings.add_to_cart_action&&a.magnificPopup.close(),e.addClass("added"),woodmartThemeModule.$body.trigger("added_to_cart",[c,d,e]))}}},error:function(){console.log("ajax adding to cart error")},complete:function(){}})}})},a(document).ready(function(){woodmartThemeModule.addToCartAllTypes()})}(jQuery);