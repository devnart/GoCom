!function(a){woodmartThemeModule.wishlist=function(){function b(b){var c=a(".wd-wishlist-content"),d=a(".wd-header-wishlist");d.length>0&&d.find(".wd-tools-count").text(b.count),c.length>0&&!c.hasClass("wd-wishlist-preview")&&woodmartThemeModule.removeDuplicatedStylesFromHTML(b.wishlist_content,function(a){c.replaceWith(a)}),woodmartThemeModule.$document.trigger("wdUpdateWishlist")}var c="woodmart_wishlist_count";woodmartThemeModule.$body.hasClass("logged-in")&&(c+="_logged"),woodmart_settings.is_multisite&&(c+="_"+woodmart_settings.current_blog_id);var d=a(".wd-header-wishlist"),e=Cookies.get(c);if(d.length>0&&void 0!==e)try{var f=JSON.parse(e);d.find(".wd-tools-count").text(f)}catch(g){console.log("cant parse cookies json")}woodmartThemeModule.$body.on("click",".wd-wishlist-btn a",function(c){var d=a(this);d.hasClass("added")||c.preventDefault();var e=d.data("product-id"),f=d.data("added-text"),g=d.data("key");if(d.hasClass("added"))return!0;d.addClass("loading"),a.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_add_to_wishlist",product_id:e,key:g},dataType:"json",method:"GET",success:function(a){a?(d.addClass("added"),woodmartThemeModule.$document.trigger("added_to_wishlist"),a.wishlist_content&&b(a),d.find("span").length>0?d.find("span").text(f):d.text(f)):console.log("something wrong loading wishlist data ",a)},error:function(){console.log("We cant add to wishlist. Something wrong with AJAX response. Probably some PHP conflict.")},complete:function(){d.removeClass("loading")}})}),woodmartThemeModule.$body.on("click",".wd-wishlist-remove",function(c){c.preventDefault();var d=a(this),e=d.data("product-id"),f=d.data("key");if(d.hasClass("added"))return!0;d.addClass("loading"),a.ajax({url:woodmart_settings.ajaxurl,data:{action:"woodmart_remove_from_wishlist",product_id:e,key:f},dataType:"json",method:"GET",success:function(a){a.wishlist_content?b(a):console.log("something wrong loading wishlist data ",a)},error:function(){console.log("We cant remove from wishlist. Something wrong with AJAX response. Probably some PHP conflict.")},complete:function(){d.removeClass("loading")}})})},a(document).ready(function(){woodmartThemeModule.wishlist()})}(jQuery);